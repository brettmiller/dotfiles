onshellexit() {
  fc -W
  DATE="$(date +"%G-%m-%d")"
  cp ~/.zsh_history ~/.zsh_history-${DATE}
}

#trap onshellexit EXIT TERM ZERR
trap onshellexit EXIT TERM
